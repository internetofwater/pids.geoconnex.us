version: '3.6'

services:
    mysql:
        image: mysql:5.7
        environment:
            MYSQL_ROOT_USER: ${YOURLS_DB_USER:-root}
            MYSQL_ROOT_PASSWORD: ${YOURLS_DB_PASSWORD:-arootpassword}
        restart: always
        networks:
            - yourls_host
        # command: ["mysqld", "--datadir=/var/lib/mysql", "--user=mysql", "--log-bin=/var/lib/mysql/mysql-bin.log", "--binlog_do_db=test"]
        # command: ["--innodb-api-enable-binlog=True"]
        volumes:
         - ./mysql/:/docker-entrypoint-initdb.d/
         - data_volume:/var/lib/mysql
    
    # python:
    #     build:
    #         context: ./build/
    #     environment:
    #         MYSQL_USER: ${YOURLS_DB_USER:-yourls_admin}
    #         MYSQL_PASSWORD: ${YOURLS_DB_PASSWORD:-arootpassword}
    #     depends_on:
    #         - mysql
    #     networks:
    #         - yourls_host
    #
    # adminer:
    #     image: adminer
    #     restart: always
    #     networks:
    #         - yourls_host
    #     ports:
    #         - 6080:8080

networks:
    yourls_host:
volumes:
    data_volume:
